Metadata-Version: 2.4
Name: uav-sysid
Version: 0.1.0
Summary: UAV Development Tool: System Identification, Automated STIL Simulation, MATLAB Physics Backend
License: MIT
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.24
Requires-Dist: scipy>=1.10
Requires-Dist: pandas>=2.0
Provides-Extra: dev
Requires-Dist: pytest>=7.4; extra == "dev"
Requires-Dist: pytest-cov>=4.1; extra == "dev"

# uav-sysid

UAV Development Tool providing three integrated capabilities:

1. **System Identification** – estimate UAV aerodynamic parameters from flight data
2. **Automated STIL Simulation** – software-in-the-loop simulation with timed test sequences and assertions
3. **MATLAB Physics Backend** – aerodynamics computations via MATLAB (with transparent numpy/scipy fallback)

## Installation

```bash
pip install -e ".[dev]"
```

## Quick Start

### System Identification

```python
from uav_sysid.sysid import FlightDataLoader, SystemIdentifier

loader = FlightDataLoader(resample_hz=100.0)
data = loader.from_csv("flight_log.csv")

ident = SystemIdentifier(regularisation=1e-4)
results = ident.fit(data)

for r in results:
    print(r)
```

### STIL Simulation

```python
from uav_sysid.simulation import STILSimulator, TestSequence, UAVState
from uav_sysid.simulation.flight_dynamics import RigidBodyDynamics

dynamics = RigidBodyDynamics(mass=1.5, inertia=[0.02, 0.04, 0.05])
initial_state = UAVState(u=20.0, theta=0.05)

seq = (
    TestSequence(duration=10.0, dt=0.01)
    .add_step(t_start=0.0, t_end=5.0, controls=[0.0, 0.1, 0.0, 0.5])
    .add_step(
        t_start=5.0, t_end=10.0,
        controls=[0.0, 0.0, 0.0, 0.5],
        assertion=lambda s: abs(s.theta) < 0.5,
    )
)

sim = STILSimulator(dynamics)
result = sim.run(initial_state, seq)
print(result.summary())
```

### MATLAB Physics Backend

```python
from uav_sysid.matlab_backend import MatlabEngine, AerodynamicsModel

# Auto-detects MATLAB; falls back to numpy/scipy if unavailable
eng = MatlabEngine()
model = AerodynamicsModel(engine=eng)

trim = model.trim(airspeed=20.0)
print(trim)  # {'alpha': ..., 'elevator': ..., 'throttle': ...}

forces, moments = model.compute(
    airspeed=20.0, alpha=0.05, beta=0.0,
    p=0.0, q=0.0, r=0.0, elevator=trim["elevator"],
)
```

## Running Tests

```bash
pytest --cov=uav_sysid tests/
```

## Project Structure

```
uav_sysid/
├── sysid/
│   ├── data_loader.py    # FlightDataLoader, FlightData
│   └── estimator.py      # SystemIdentifier, SysIdResult
├── simulation/
│   ├── flight_dynamics.py  # RigidBodyDynamics (6-DOF), UAVState
│   └── simulator.py        # STILSimulator, TestSequence, SimulationResult
└── matlab_backend/
    ├── engine.py           # MatlabEngine (MATLAB / numpy fallback)
    └── physics.py          # AerodynamicsModel, AeroCoefficients
tests/
├── test_sysid.py
├── test_simulation.py
└── test_matlab_backend.py
```
